<div class="container-fluid" [@fadeInRight]>
  <div class="row">
    <div class="col-12">
      <div class="title-banner-card shadow-sm">
        <div class="title-banner-content d-flex align-items-center justify-content-between flex-wrap p-1 pb-0">
          <div class="d-flex align-items-center gap-3">
            <div class="title-icon">
              <i class="fas fa-cogs"></i>
            </div>
            <div>
              <h4 class="title-title">{{ title }}</h4>
              <p class="title-subtitle">Captura la información requerida para el registro.</p>
            </div>
          </div>
          <div class="title-actions">
            <div class="title-tagline">
              <span class="line"></span>
              <span class="text">Control y configuración centralizada</span>
            </div>
          </div>
        </div>
        <div class="row mt-3 gy-4">
          <form [formGroup]="maquinaForm">
            <div class="col-12">
              <!-- Sección: Información General -->
              <div class="form-section">
                <div class="section-header">
                  <div class="section-icon">
                    <i class="fas fa-info-circle"></i>
                  </div>
                  <h5 class="section-title">Información General</h5>
                  <div class="section-line"></div>
                </div>
                <div class="row mt-0">
                  <div class="col-12 col-lg-3">
                    <label class="field">
                      <span class="field-label text-white">Número de Serie</span>
                      <div class="input-sleek">
                        <i class="fas fa-barcode"></i>
                        <input formControlName="numeroSerie" class="sleek-control" type="text"
                          placeholder="Número de serie" />
                        <span class="sleek-line"></span>
                      </div>
                    </label>
                  </div>
                  <div class="col-12 col-lg-3">
                    <label class="field">
                      <span class="field-label text-white">Nombre</span>
                      <div class="input-sleek">
                        <i class="fas fa-tag"></i>
                        <input formControlName="nombre" class="sleek-control" type="text"
                          placeholder="Nombre de la máquina" />
                        <span class="sleek-line"></span>
                      </div>
                    </label>
                  </div>
                  <div class="col-12 col-lg-3">
                    <label class="field">
                      <span class="field-label text-white">Marca</span>
                      <div class="input-sleek">
                        <i class="fas fa-industry"></i>
                        <input formControlName="marca" class="sleek-control" type="text"
                          placeholder="Marca" />
                        <span class="sleek-line"></span>
                      </div>
                    </label>
                  </div>
                  <div class="col-12 col-lg-3">
                    <label class="field">
                      <span class="field-label text-white">Modelo</span>
                      <div class="input-sleek">
                        <i class="fas fa-cube"></i>
                        <input formControlName="modelo" class="sleek-control" type="text"
                          placeholder="Modelo" />
                        <span class="sleek-line"></span>
                      </div>
                    </label>
                  </div>
                </div>
              </div>

              <!-- Sección: Ubicación -->
              <div class="form-section">
                <div class="section-header">
                  <div class="section-icon">
                    <i class="fas fa-map-marker-alt"></i>
                  </div>
                  <h5 class="section-title">Ubicación</h5>
                  <div class="section-line"></div>
                </div>
                <div class="row mt-0">
                  <div class="col-12 col-lg-4">
                    <label class="field">
                      <span class="field-label text-white">Cliente</span>
                      <dx-select-box
                        [dataSource]="listaClientes"
                        displayExpr="text"
                        valueExpr="id"
                        formControlName="idCliente"
                        placeholder="Selecciona un cliente..."
                        searchEnabled="true"
                        searchMode="contains"
                        [showClearButton]="true"
                        class="dx-select-box-custom dx-select-box-cliente">
                      </dx-select-box>
                    </label>
                  </div>
                  <div class="col-12 col-lg-4">
                    <label class="field">
                      <span class="field-label text-white">Sala</span>
                      <dx-select-box
                        [dataSource]="listaSalas"
                        displayExpr="text"
                        valueExpr="id"
                        formControlName="idSala"
                        placeholder="Selecciona una sala..."
                        searchEnabled="true"
                        searchMode="contains"
                        [showClearButton]="true"
                        class="dx-select-box-custom dx-select-box-sala">
                      </dx-select-box>
                    </label>
                  </div>
                  <div class="col-12 col-lg-4">
                    <label class="field">
                      <span class="field-label text-white">Zona</span>
                      <dx-select-box
                        [dataSource]="listaZonas"
                        displayExpr="text"
                        valueExpr="id"
                        formControlName="idZona"
                        placeholder="Selecciona una zona..."
                        searchEnabled="true"
                        searchMode="contains"
                        [showClearButton]="true"
                        class="dx-select-box-custom dx-select-box-zona">
                      </dx-select-box>
                    </label>
                  </div>
                </div>
              </div>

              <!-- Sección: Clasificación -->
              <div class="form-section">
                <div class="section-header">
                  <div class="section-icon">
                    <i class="fas fa-tags"></i>
                  </div>
                  <h5 class="section-title">Clasificación</h5>
                  <div class="section-line"></div>
                </div>
                <div class="row mt-0">
                  <div class="col-12 col-lg-4">
                    <label class="field">
                      <span class="field-label text-white">Tipo de Máquina</span>
                      <dx-select-box
                        [dataSource]="listaTipoMaquina"
                        displayExpr="text"
                        valueExpr="id"
                        formControlName="idTipoMaquina"
                        placeholder="Selecciona un tipo..."
                        searchEnabled="true"
                        searchMode="contains"
                        [showClearButton]="true"
                        class="dx-select-box-custom dx-select-box-tipo-maquina">
                      </dx-select-box>
                    </label>
                  </div>
                  <div class="col-12 col-lg-4">
                    <label class="field">
                      <span class="field-label text-white">Fabricante</span>
                      <dx-select-box
                        [dataSource]="listaFabricantes"
                        displayExpr="text"
                        valueExpr="id"
                        formControlName="idFabricante"
                        placeholder="Selecciona un fabricante..."
                        searchEnabled="true"
                        searchMode="contains"
                        [showClearButton]="true"
                        class="dx-select-box-custom dx-select-box-fabricante">
                      </dx-select-box>
                    </label>
                  </div>
                  <div class="col-12 col-lg-4">
                    <label class="field">
                      <span class="field-label text-white">Estatus</span>
                      <dx-select-box
                        [dataSource]="listaEstatusMaquina"
                        displayExpr="text"
                        valueExpr="id"
                        formControlName="idEstatusMaquina"
                        placeholder="Selecciona un estatus..."
                        searchEnabled="true"
                        searchMode="contains"
                        [showClearButton]="true"
                        class="dx-select-box-custom dx-select-box-estatus">
                      </dx-select-box>
                    </label>
                  </div>
                </div>
              </div>

              <!-- Sección: Fechas y Costos -->
              <div class="form-section">
                <div class="section-header">
                  <div class="section-icon">
                    <i class="fas fa-calendar-alt"></i>
                  </div>
                  <h5 class="section-title">Fechas y Costos</h5>
                  <div class="section-line"></div>
                </div>
                <div class="row mt-0">
                  <div class="col-12 col-lg-4">
                    <label class="field">
                      <span class="field-label text-white">Año de Fabricación</span>
                      <div class="input-sleek">
                        <i class="fas fa-calendar"></i>
                        <input formControlName="anioFabricacion" class="sleek-control" type="date" />
                        <span class="sleek-line"></span>
                      </div>
                    </label>
                  </div>
                  <div class="col-12 col-lg-4">
                    <label class="field">
                      <span class="field-label text-white">Fecha de Adquisición</span>
                      <div class="input-sleek">
                        <i class="fas fa-shopping-cart"></i>
                        <input formControlName="fechaAdquisicion" class="sleek-control" type="date" />
                        <span class="sleek-line"></span>
                      </div>
                    </label>
                  </div>
                  <div class="col-12 col-lg-4">
                    <label class="field">
                      <span class="field-label text-white">Costo de Adquisición</span>
                      <div class="input-sleek">
                        <i class="fas fa-dollar-sign"></i>
                        <input formControlName="costoAdquisicion" class="sleek-control" type="text"
                          placeholder="0.00" (keypress)="allowOnlyNumbers($event)" />
                        <span class="sleek-line"></span>
                      </div>
                    </label>
                  </div>
                </div>
              </div>

              <!-- Sección: Dimensiones -->
              <div class="form-section">
                <div class="section-header">
                  <div class="section-icon">
                    <i class="fas fa-ruler-combined"></i>
                  </div>
                  <h5 class="section-title">Dimensiones</h5>
                  <div class="section-line"></div>
                </div>
                <div class="row mt-0">
                  <div class="col-12 col-lg-4">
                    <label class="field">
                      <span class="field-label text-white">Ancho (metros)</span>
                      <div class="input-sleek">
                        <i class="fas fa-arrows-alt-h"></i>
                        <input formControlName="anchoMetros" class="sleek-control" type="text"
                          placeholder="0.00" (keypress)="allowOnlyNumbers($event)" />
                        <span class="sleek-line"></span>
                      </div>
                    </label>
                  </div>
                  <div class="col-12 col-lg-4">
                    <label class="field">
                      <span class="field-label text-white">Alto (metros)</span>
                      <div class="input-sleek">
                        <i class="fas fa-arrows-alt-v"></i>
                        <input formControlName="altoMetros" class="sleek-control" type="text"
                          placeholder="0.00" (keypress)="allowOnlyNumbers($event)" />
                        <span class="sleek-line"></span>
                      </div>
                    </label>
                  </div>
                  <div class="col-12 col-lg-4">
                    <label class="field">
                      <span class="field-label text-white">Profundidad (metros)</span>
                      <div class="input-sleek">
                        <i class="fas fa-cube"></i>
                        <input formControlName="profundidadMetros" class="sleek-control" type="text"
                          placeholder="0.00" (keypress)="allowOnlyNumbers($event)" />
                        <span class="sleek-line"></span>
                      </div>
                    </label>
                  </div>
                </div>
              </div>

              <!-- Sección: Imágenes -->
              <div class="form-section">
                <div class="section-header">
                  <div class="section-icon">
                    <i class="fas fa-images"></i>
                  </div>
                  <h5 class="section-title">Imágenes</h5>
                  <div class="section-line"></div>
                </div>
                <div class="row mt-0">
                  <div class="col-12 col-lg-6">
                    <label class="field">
                      <span class="field-label text-white">Imagen de la Máquina</span>
                      <div class="pf-uploader" (click)="openImagenFilePicker()">
                        <div class="pf-top">
                          <div class="pf-title">
                            <i class="fas fa-image"></i>
                            <span>Imagen de la Máquina</span>
                          </div>
                          <div class="pf-badge" *ngIf="imagenFileName">{{ imagenFileName }}</div>
                        </div>
                        <div class="pf-mid">
                          <div class="pf-hero" *ngIf="imagenPreviewUrl">
                            <img [src]="imagenPreviewUrl" alt="Imagen" />
                          </div>
                          <div class="pf-empty" *ngIf="!imagenPreviewUrl">
                            <div class="pf-orb">
                              <i class="fas fa-cloud-upload-alt"></i>
                            </div>
                            <div class="pf-copy">
                              <div class="pf-main">Subir imagen</div>
                              <div class="pf-sub">Arrastra o haz clic · JPG/PNG/WEBP</div>
                            </div>
                            <div class="pf-cta">
                              <span>Seleccionar</span>
                              <i class="fas fa-arrow-right"></i>
                            </div>
                          </div>
                        </div>
                        <div class="pf-actions" *ngIf="imagenPreviewUrl" (click)="$event.stopPropagation()">
                          <button type="button" class="pf-btn pf-btn--primary"
                            (click)="openImagenFilePicker()">
                            <i class="fas fa-sync"></i>
                            <span>Reemplazar</span>
                          </button>
                          <button type="button" class="pf-btn pf-btn--ghost" (click)="clearImagen($event)">
                            <i class="fas fa-trash"></i>
                            <span>Eliminar</span>
                          </button>
                        </div>
                      </div>
                      <input type="file" #imagenFileInput accept=".jpg,.jpeg,.png,.webp" hidden
                        (change)="onImagenSelected($event)" />
                    </label>
                  </div>
                  <div class="col-12 col-lg-6">
                    <label class="field">
                      <span class="field-label text-white">Icono de la Máquina</span>
                      <div class="pf-uploader" (click)="openIconoFilePicker()">
                        <div class="pf-top">
                          <div class="pf-title">
                            <i class="fas fa-icons"></i>
                            <span>Icono de la Máquina</span>
                          </div>
                          <div class="pf-badge" *ngIf="iconoFileName">{{ iconoFileName }}</div>
                        </div>
                        <div class="pf-mid">
                          <div class="pf-hero" *ngIf="iconoPreviewUrl">
                            <img [src]="iconoPreviewUrl" alt="Icono" />
                          </div>
                          <div class="pf-empty" *ngIf="!iconoPreviewUrl">
                            <div class="pf-orb">
                              <i class="fas fa-cloud-upload-alt"></i>
                            </div>
                            <div class="pf-copy">
                              <div class="pf-main">Subir icono</div>
                              <div class="pf-sub">Arrastra o haz clic · JPG/PNG/WEBP</div>
                            </div>
                            <div class="pf-cta">
                              <span>Seleccionar</span>
                              <i class="fas fa-arrow-right"></i>
                            </div>
                          </div>
                        </div>
                        <div class="pf-actions" *ngIf="iconoPreviewUrl" (click)="$event.stopPropagation()">
                          <button type="button" class="pf-btn pf-btn--primary"
                            (click)="openIconoFilePicker()">
                            <i class="fas fa-sync"></i>
                            <span>Reemplazar</span>
                          </button>
                          <button type="button" class="pf-btn pf-btn--ghost" (click)="clearIcono($event)">
                            <i class="fas fa-trash"></i>
                            <span>Eliminar</span>
                          </button>
                        </div>
                      </div>
                      <input type="file" #iconoFileInput accept=".jpg,.jpeg,.png,.webp" hidden
                        (change)="onIconoSelected($event)" />
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>

        <div class="row mt-4">
          <div class="col-12 d-flex justify-content-start gap-3 flex-wrap">
            <button (click)="submit()" type="button" class="btn-alt btn-alt--success" [disabled]="loading">
              <i class="fas fa-check"></i>
              <span>{{ submitButton }}</span>
            </button>
            <button (click)="regresar()" type="button" class="btn-alt btn-alt--cancel" [disabled]="loading">
              <i class="fas fa-times"></i>
              <span>Cancelar</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
